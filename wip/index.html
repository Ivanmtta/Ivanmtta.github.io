<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width">
		<style>
			body, canvas{
				margin: 0px;
				padding: 0px;
			}
			canvas{
				background-color: gray;
			}
		</style>
	</head>
	<body>
		<canvas id = "frame" width = "600" height = "420"></canvas>
		<script>
			var frame = document.getElementById("frame");
			var graphics = frame.getContext("2d");
			frame.addEventListener("touchstart", mousePressed);
			frame.addEventListener("touchend", mouseReleased);
			frame.addEventListener("touchmove", mouseMoved);

			var joy = {
				inner: {
					x: 0,
					y: 0,
					size: 0
				},
				outer: {
					x: 0,
					y: 0,
					size: 0
				}
			};

			window.onload = ()=>{
				gameLoop();
			}

			function gameLoop(){
				update();
				draw();
				window.requestAnimationFrame(gameLoop);
			}

			function update(){
			}

			function draw(){
				graphics.clearRect(0, 0, frame.width, frame.height);

				graphics.beginPath();
				graphics.fillStyle = "blue";
				graphics.arc(joy.outer.x, joy.outer.y, joy.outer.size / 2, 0, 2 * Math.PI);
				graphics.fill();
				graphics.closePath();

				graphics.beginPath();
				graphics.fillStyle = "red";
				graphics.arc(joy.inner.x, joy.inner.y, joy.inner.size / 2, 0, 2 * Math.PI);
				graphics.fill();
				graphics.closePath();
			}

			function mousePressed(event){
				joy.outer.x = event.touches[0].clientX;
				joy.outer.y = event.touches[0].clientY;
				joy.inner.x = joy.outer.x;
				joy.inner.y = joy.outer.y;
				joy.outer.size = 200;
				joy.inner.size = 100;
			}

			function mouseReleased(event){
				joy.outer.size = 0;
				joy.inner.size = 0;
			}

			function mouseMoved(event){
				if(event.cancelable){
					event.preventDefault();
				}
				joy.inner.x = event.targetTouches[0].clientX;
				joy.inner.y = event.targetTouches[0].clientY;
			}

		</script>
	</body>
</html>